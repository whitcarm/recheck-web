(function(b){var a=window.AmazonUIPageJS||window.P,f=a._namespace||a.attributeErrors,e=f?f("AmazonGatewayAuiAssets"):a;e.guardFatal?e.guardFatal(b)(e,window):e.execute(function(){b(e,window)})})(function(b,a,f){b.register("gateway-asset-load",function(){a.uet&&a.uet("cf","gateway-asset-load",{wb:1});a.uex&&a.uex("ld","gateway-asset-load",{wb:1})});b.when("A","load").execute("ah-inst-img-size",function(e){function g(a){if(!a)return null;var b=p(a).attr("src");a=p(a).data("a-hires");return b===a?null:
b}function c(a){"object"===typeof h.ue&&"function"===typeof h.ue.count&&h.ue&&h.ue.count(a,(h.ue.count(a)||0)+1)}function n(a,b){c("gw-img-size-invoke");p.ajax({type:"HEAD",async:!0,url:a,success:function(a,h,m){c("gw-img-size-success");e.trigger(b,parseInt(m.getResponseHeader("Content-Length"),10))},error:function(a,b,h){c("gw-img-size-error")}})}function d(a,b){0<a.length&&(m[b]={count:a.length,totalSize:0,images:p.unique(a)},p(m[b].images).each(function(a,c){var d=b+"_"+a;e.on(d,function(a){isNaN(a)||
(--m[b].count,m[b].totalSize+=a,0===m[b].count&&h.ue&&h.ue.count(b,m[b].totalSize))});n(c,d)}))}function r(a,b){b=b||a.length;var h=[];p(a.slice(0,b)).each(function(a,b){var c=g(b);if(!c)return[];h.push(c)});return h}var p=e.$,h=a,m=[];b.execute("inst-cf-img",function(){c("gw-inst-img");var a=e.$(".gw-critical-content img");(a=0>=a.length?null:g(a[0]))&&d([a],"gw-cf-img-size")});b.when("x1").execute("inst-x1-img",function(){b.execute("inst-x1-rec-img",function(){var a=1;p("#gw-content-grid .feed-carousel .feed-carousel-shelf").slice(0,
2).each(function(b,h){if(2>=a){var c="gw-shoveler-img-size-"+a++,m=p(h).find("img");6<=m.length&&(m=r(m,6),d(m,c))}})})})});b.when("A").register("dombinder",function(a){function b(a,c){var h=0;c=c.split(".");for(var m=c.length;h<m;h++)a=a&&a[c[h]];return a}function c(a){return n.map(n(a).data("bind").split(","),function(b){b=b.split(":");var c=n.trim(b[0]),m=n.trim(b[1]),q=d[c];if(q)return q.init&&q.init(a,m),function(b){q.update(a,m,b)}})}var n=a.$,d={text:{update:function(a,c,h){n(a).text(b(h,
c)||"")}},html:{update:function(a,c,h){n(a).html(b(h,c)||"")}},href:{update:function(a,c,h){n(a).attr("href",b(h,c)||"")}},trimText:{update:function(a,b,c){a=n(a);c=a.text();if(c.length>b){for(var m=b-4;0<=m&&0<"[.,-/#!$%^&*;:{}=-_`~()] ".indexOf(c[m]);)m--;a.text(c.substring(0,0<=m?m+1:b-3)+"...")}}},value:{update:function(a,c,h){n(a).val(b(h,c)||"")}},visible:{update:function(a,c,h){var m=!1;"!"===c.charAt(0)&&(m=!0,c=c.substring(1));c=!!b(h,c);m!==c?n(a).show():n(a).hide()}},css:{init:function(a,
b){var c=n(a),m=c.data("dombcss")||[];m[b]="";c.data("dombcss",m)},update:function(a,c,h){a=n(a);var m=a.data("dombcss"),d=m[c];h=b(h,c);d!==h&&(m[c]=h,d&&a.removeClass(d),h&&a.addClass(h))}},attr:{init:function(a,b){var c=n(a),m=c.data("dombattr")||[];m[b]={};c.data("dombattr",m)},update:function(a,c,h){var m=n(a);a=m.data("dombattr");var d=a[c];h=b(h,c);d!==h&&(a[c]=h,d&&n.each(d,function(a,b){m.removeAttr(a)}),h&&n.each(h,function(a,b){m.attr(a,b)}))}}};return{init:function(a){var b={$root:a,bindings:[]};
a.find("[data-bind]").each(function(){n.each(c(this),function(a,c){b.bindings.push(c)})});return b},update:function(a,b){n.each(a.bindings,function(a,c){c(b)})}}});b.when("jQuery").register("gwAjax",function(b){return function(g,c){function n(b,m,q){"object"===typeof a.ue&&"function"===typeof a.ue.count&&(d(c.errorCounter||"gwAjaxError"),c.id&&d("gwAjaxError:"+c.id));"function"===typeof a.ueLogError&&a.ueLogError({logLevel:"WARN",attribution:"gwAjax-"+(c.id||g),message:"gwAjax call failed "+
(JSON&&JSON.stringify?JSON.stringify({url:g,"params-data":c.params||c.data}):"")});"function"===typeof p&&p(b,m,q)}function d(b){"object"===typeof a.ue&&"function"===typeof a.ue.count&&a.ue.count(b,(a.ue.count(b)||0)+1)}c=b.extend(!0,{},c);var r=c.success,p=c.error;c.success=function(a,b,c){a.error?n(a,b,c):"function"===typeof r&&r(a,b,c)};c.error=n;c.data=c.params?c.params:c.data;d("gwAjaxCall");c.ajaxCounter&&d(c.ajaxCounter);return b.ajax(g,c)}});b.when("jQuery","gw-hud-punt").execute("gw-hud-sidekick",
function(a){a("#gw-hud-grid").css({display:"none"})});b.when("A","a-modal","gw-productdb","productdb-binding-helper","sg-media-builder","gw-sims","gw-popover-data").register("gw-popover",function(b,g,c,n,d,r,p){function h(b,c){a.uet&&a.uet(b,c,{wb:1})}function m(b){if(a.ue&&"function"===typeof a.ue.count)return a.ue.count(b)||0}function q(b){a.ue&&"function"===typeof a.ue.count&&a.ue.count(b,(a.ue.count(b)||0)+1)}function l(a){return a.closest("*[data-sgproduct]").data("sgproduct")}function k(a){a=
a.closest(".shogun-widget");return!a.length||a.hasClass("card-lite")?"/ah/ajax/product":"/gp/gw/ajax/pdb.html"}function w(a,b,c){u[a.asin]&&u[a.asin].isResolved()?C.resetSimData():(u[a.asin]=f.Deferred(),a&&a.asin&&b&&c?C.fetch(a,b,u[a.asin],c):u[a.asin].reject())}var f=b.$,t={},u={};if(!f("html").hasClass("a-touch")){var v=f('<span style="display: none" />').appendTo("body"),y=f("#gw-popover-wrapper"),z=new n(c,y),A=g.create(v,{name:"gw-asin-popover",width:"90%","max-width":900,height:590,popoverLabel:p.popoverLabel,
closeButton:!1}),C=new r(z),B=f("#gw-quick-look-btn");f("#a-page").delegate("li[data-sgproduct]","mouseenter",function(a){a=f(a.currentTarget);a.closest(".deals-shoveler").length||(a.append(B),a.find("[title]").removeAttr("title"),B.addClass("active"))});B.mouseenter(function(){var a=f(this),b=k(a),c=l(a),a=a.siblings().children("a").attr("href");w(c,a,b)});f(".bestsellers .listRow a").mouseenter(function(){var a=f(this),b=k(a),h=l(a),a=a.attr("href");w(h,a,b);!h||!h.asin||t[h.asin]&&t[h.asin].isResolved()||
!(b=c.get(h.asin))||(t[h.asin]=f.Deferred(),t[h.asin].resolve(b))});var G={};f("#a-page").delegate(".fresh-shoveler li[data-sgproduct]","mouseenter mousemove",function(a){a=f(a.currentTarget);if(!a.closest(".deals-shoveler").length){var h=a.data("sgproduct").asin;if(!t[h]||!t[h].isResolved()){var l=[];a.add(a.prev("li[data-sgproduct]")).add(a.next("li[data-sgproduct]")).each(function(){var a=f(this).data("sgproduct");if(a&&a.asin){var h=c.get(a.asin),k=(h=!(!G[a.asin]&&h&&h.loading))&&1500<b.now()-
G[a.asin];if(!h||k)l.push(a.asin),G[a.asin]=b.now()}});t[h]=f.Deferred();l.length?(c._ajax('{"asins": ["'+l.join('","')+'"]}',{id:"quicklook-pdb"},{url:k(a)}).done(function(a){c._add(a);for(var b=0;b<l.length;b++)G[l[b]]=Infinity;t[h].resolve(a)}).fail(t[h].reject),q("freshHoverCount")):t[h].resolve()}}});f("#a-page").delegate("li[data-sgproduct]","mouseleave",function(a){f(a.currentTarget).closest(".deals-shoveler").length||B.removeClass("active")});var H="#a-popover-"+A.attrs("id")+" ";g=f.map([".a-popover-header { display: none; }",
".a-popover-inner { padding: 0px !important; margin: 0px !important; overflow: hidden !important; height: 100% !important; }"],function(a){return H+a}).join(" ");f("head").append("<style>"+g+"</style>");b.on("a:popover:hide:gw-asin-popover",function(b){a.history.state&&a.history.state.popup&&a.history.back();z.clear()});f(a).bind("popstate",function(){A.hide()});return{show:function(b,c){q("freshPopOverOn");h("bb","popoverLatency"+m("freshPopOverOn"));a.history&&a.history.pushState&&a.history.pushState({popup:1},
"");z.setAsin(b,{beforeUpdate:function(a){if(a.loading)return q("freshPopOverLoading"),a;var l=(new d(a.images[0])).autoCrop().scaleXY(500,400).build(),l={url:c,image:l,actionUrl:{action:"/gp/product/handle-buy-box/"+function(a){return a.substring(a.indexOf("/ref=")+1,a.length)}(c)}};a.reviews&&(l.reviews=f.extend({},a.reviews,{url:c+"#customerReviews"}));f.when(u[b],t[b]).done(function(a,c){C.showSims(b,a)});u[b].fail(C.setNoSimView);h("cf","popoverLatency"+m("freshPopOverOn"));return f.extend({},
a,l)}});A.show()},hide:function(){A.hide()}}}});b.when("jQuery","sg-media-builder","gw-productdb").register("gw-sims",function(e,g,c){return function(n){function d(b,c){a.uet&&a.uet(b,c,{wb:1})}function r(b){if(a.ue&&"function"===typeof a.ue.count)return a.ue.count(b)||0}function p(b){a.ue&&"function"===typeof a.ue.count&&a.ue.count(b,(a.ue.count(b)||0)+1)}function h(){if(!C){C=!0;H.hide();F.show();G.animate({height:"100%"},300);var b=0,c=0,h=0,l=parseInt(F.css("width"),10),k=F.find(".sims-img-link");
k.each(function(a,k){b+=k.clientWidth;l<b?e(k).hide():(c=b,h+=1)});var m=l-c;0<m&&(m=Math.floor(20+m/h-1),20<m&&k.css({"padding-right":m/2+"px","padding-left":m/2+"px"}));k="popoverLatency"+r("freshPopOverOn");d("be",k);a.uex&&a.uex("ld",k,{wb:1})}}function m(){0===--v&&h()}function q(a,b){var c=e("<a>"),h=e("<div>");c.attr("class","sims-img-link");h.addClass("sims-img-border");b&&c.addClass("selected");c.click(function(){p("freshPopOverSimsClick");F.find(".sims-img-link").removeClass("selected");
e(this).addClass("selected");n.clear();n.setAsin(a.asin,{beforeUpdate:function(b){b=e.extend(!0,{},a);var c=a.url;if(b.loading)p("freshPopOverLoading");else{var h=(new g(b.images[0])).autoCrop().scaleXY(500,400).build(),h={url:c,image:h,actionUrl:{action:"/gp/product/handle-buy-box/"+k(c)}};b.reviews&&(h.reviews=e.extend({},b.reviews,{url:c+"#customerReviews"}));b=e.extend({},b,h)}return b}})});return c.append(h)}function l(){e.each(y,function(a,b){b.url=b.url.replace(/ref=gw_pdb_pdt-[\d]+/,k(z)+
"&gw_sims-"+a)})}function k(a){return 0<=a.indexOf("redirect.html?")?a.replace(/.*redirect.html|(token|location)=.*?&/g,""):0<=a.indexOf("/ref=")?a.substring(a.indexOf("/ref=")+1,a.length):0<=a.indexOf("?")?a.substring(a.indexOf("?"),a.length):""}function w(){C=!1;l();var a=[];v=y.length>v?v:y.length;e(y).each(function(b,c){c.loading=!1;if(c.images[0].src){var h=(new g(c.images[0])).autoCrop().scaleXY(130,100).build().src,l=e("<img>");l.attr("src",h);l.attr("class","sims-img");l.load(m);h=e("<div>");
h.attr("class","sims-img-container");var k=e("<div>");k.addClass("sims-img-overlay");e(h).append(k);h.append(l);l=q(c,0===b);l.append(h);a.push(l)}return b<v-1});v=a.length;e(a).each(function(a,b){F.append(b)});setTimeout(h,A)}function f(){b.when("gw-popover").execute(function(a){a.hide()})}function t(){H.hide();G.addClass("hidden");B.bind("click",f)}function u(){F.empty();G.add(H).removeAttr("style");G.removeClass("hidden");B.unbind("click",f);H.show();F.hide();v=8;y=[]}var v,y,z,A=1E4,C=!1,B=e("#sims-section"),
G=B.find(".sims-wrapper"),H=B.find(".sims-loading"),F=B.find(".sims-details");e("#gw-asin-popover");return{fetch:function(a,b,h,l){d("af","popoverLatency"+r("freshPopOverOn"));u();z=b;a.url=z;y.push(a);b=c.get(a.asin);setTimeout(h.reject,A);b.sims?h.resolve(b.sims):c._ajax('{"asins": [], "entityId":"'+a.asin+'","datasetId": "purchase"}',{id:"quicklook-sims-pdb"},{url:l}).done(function(b){if(b&&b.p&&0<b.p.length){var l=a.asin,k=b.p;k&&(c.get(l).sims||c.addSims(l,k));return h.resolve(b.p)}return h.reject()}).fail(h.reject);
return h},setNoSimView:t,showSims:function(a,b){var h=c.get(a);h.loading?p("freshPopOverSimLoadBeforePrimeAsin"):y=h.sims?e.merge([h],h.sims):e.merge([h],b);4<y.length?w():(p("simsLessThanThreshold"),t())},resetSimData:u,setWaitPeriod:function(a){A=a}}}});b.when("A").execute(function(e){var g=e.$,c,n;if(!e.$("html").hasClass("a-touch"))if(a.cvox)a.ue&&a.ue.tag&&a.ue.tag("screenReaderOn");else{g("#a-page").delegate("*[data-sgproduct] #gw-quick-look-btn","click",function(a){g(a.target).closest(".deals-shoveler").length||
d(a)});g("#a-page").delegate(".bestseller-list *[data-sgproduct]","click",function(a){d(a)});b.when("gw-popover").execute(function(a){c=a;g("#gw-popover-close").click(function(){c.hide()});n&&c.show.apply(c,n)});var d=function(a){if(!(1<a.which||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey)){var b,h;g(a.target).parents(".bestseller-list").length?(b=g(a.currentTarget).data("sgproduct"),h=g(a.target).closest("a").attr("href")):(b=g("#gw-quick-look-btn").closest("*[data-sgproduct]").data("sgproduct"),
h=g("#gw-quick-look-btn").siblings().children("a").attr("href"));var m=[b.asin,h];b.asin&&h&&(a.preventDefault(),c?c.show.apply(c,m):n=m)}}}});b.register("gw/card-modal",function(){function a(c,e){if(g)return g(c,e);b.when("__gw-card-modal").execute(function(a){a(c,e)});return{show:function(){}}}var g;b.when("__gw-card-modal").execute(function(a){g=a});return{show:function(b,n){a(b,n).show()},preload:function(c,n){b.when("ready").execute(function(){a(c,n)})}}});b.when("A","a-modal","gw/card-loader").register("__gw-card-modal",
function(a,b,c){var n={},d=a.$;return function(r,p){if(n[r])return n[r];var h=c.decodeToken(r).name,m=d('<span style="display: none" />').appendTo("body"),h=d.extend({name:h||"gw-card-popover",closeButton:!0,hideHeader:!0,style:"gw",content:d('<div aria-hidden="true"></div>').html(p&&p.loading||'<div class="gw-modal-loading"><i class="gw-spinner"></i></div>')},p),q=n[r]=b.create(m,h);if("gw"===h.style){var l="#a-popover-"+q.attrs("id"),m=d.map([" .a-popover-inner { overflow: hidden !important; height: 100% !important; min-width: 80px; min-height: 80px; }",
" .a-popover-wrapper { border: none; border-radius: 0; }"],function(a){return l+a}).join(" ");d("head").append("<style>"+m+"</style>");if(h.closeButton)a.on("a:popover:show:"+h.name,function(a){a=d(l);a.find("button.a-button-close").addClass("gw-close-button");a.find(".a-icon.a-icon-close").attr("class","gw-icon gw-icon-close")})}c.request(r).then(function(a){q.update({content:a.html()})});return n[r]}});b.when("gw-promise","urlb64decode").register("gw/card-loader",function(a,g){function c(){try{var a=
(new URL(document.location.href)).searchParams.get("cardOverrides");if(a)return"cardOverrides="+a}catch(b){if(a=document.location.href.match(/[?&](cardOverrides=.*?)([&#]|$)/),null!==a)return a[1]}}var n=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},d={};return{decodeToken:function(a){return JSON.parse(g(a.substring(1)))},request:function(r){function p(a){for(var b=0,c=k.length;b<c;b++)k[b]&&k[b](a)}for(var h=n(r)?r:[r],m=c(),q="/homepage.html/ajax/card"+(m?
"?"+m:""),m=[],l=[],k=[],w=[],g=0,f=h.length;g<f;g++){var u=h[g];d[u]?m[g]=d[u]:(m[g]=d[u]=a(function(a,b){l[g]=a;k[g]=b}),w[g]={t:u})}0<w.length&&b.when("A").execute(function(a){a.post(q,{chunk:function(b){var c=b[1];c&&(c.ok?l[c.i]&&l[c.i]({render:function(b){a.$(b).html(c.body)},html:function(){return c.body}}):k[c.i]&&k[c.i](c.body))},success:function(a,b,c){p("Not Found")},error:function(a,b,c){p(c)},abort:function(a){p("Aborted")},contentType:"application/json",paramsFormat:"json",params:w})});
return n(r)?m:m[0]}}});a.Promise?b.register("gw-promise",function(){return function(a){return new Promise(a)}}):b.when("jQuery").register("gw-promise",function(a){return function(b){var c=a.Deferred();b(c.resolve,c.reject);return{then:c.then,"catch":function(a){return c.fail(a)}}}});b.register("urlb64decode",function(){if(a.atob){var b={"-":"+",_:"/"};return function(g){return a.atob(g.replace(/[-_]/g,function(a){return b[a]}))}}return function(a){a=a.replace(/\s|=/g,"");for(var b="",e=0,d=a.length;e<
d;e+=4){for(var r=0,p=e,h=24;0<h&&p<d;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(a.charAt(p++))<<(h-=6);b+=String.fromCharCode(r>>>16&255,r>>>8&255,r&255)}return b}});b.when("jQuery","dombinder").register("productdb-binding-helper",function(a,b){function c(b,c){return a.isFunction(b)?b(c):c}return function(a,d){function r(a,c){b.update(k,m(c.beforeUpdate,a));a.loading||m(c.load,a)}function p(a){h();l=function(){a(q)};q.pdb_observe(l)}function h(){q&&
l&&(q.pdb_unobserve(l),l=null)}var m=c,q=null,l=null,k=b.init(d);this.setAsin=function(b,c){c=c||{};h();q=a.get(b);r(q,c);q.loading&&p(function(a){r(a,c)});return q};this.clear=function(){h();q={};b.update(k,q)}}});a.P&&b.when("jQuery","afterLoad").register("gw-resource-logger",function(b){return{instrumentResources:function(g){var c;c=!1;if(b.isArray(g)&&!b.isEmptyObject(g)){c=!0;for(var n=0;n<g.length;n++){var d=g[n];if("id"in d&&"regex"in d&&"initiator"in d){if(!("string"===typeof d.id&&"string"===
typeof d.initiator&&d.regex instanceof RegExp)){c=!1;break}}else{c=!1;break}}}n=a.performance&&"function"===typeof a.performance.getEntriesByType&&"undefined"!==typeof a.performance.getEntriesByType("resource")&&"undefined"!==typeof a.ue;if(c&&n){c=Array(g.length);for(n=0;n<c.length;n++)c[n]=!1;for(d=n=0;d<a.performance.getEntriesByType("resource").length&&n<g.length;d++)for(var r=a.performance.getEntriesByType("resource")[d],p=r.name,h=r.initiatorType,m=0;m<g.length;m++)if(!c[m]){var q=g[m].regex;
if(h===g[m].initiator&&q.test(p)){p=g[m].id;h=r;r=h.duration;a.ue.count&&(a.ue.count(p+":duration",r),a.ue.count(p+":startTime",h.startTime));a.ue.tag&&(h=void 0,h=50>r?p+":cached":p+":notCached",a.ue.tag(h));c[m]=!0;n++;break}}}}}});b.register("sg-media-builder",function(){return function(a){var b=this,c=a.src,n=[];b.build=function(){var b=n.join("_");return{src:c.replace(/\.([^.]+)$/,"._"+b+"_.$1"),alt:a.alt}};b.autoCrop=function(){n.push("AC");return b};b.scaleX=function(a){n.push("SX"+
a);return b};b.scaleY=function(a){n.push("SY"+a);return b};b.upScaleX=function(a){n.push("UX"+a);return b};b.upScaleY=function(a){n.push("UY"+a);return b};b.scaleXY=function(a,c){return b.upScaleX(a).scaleY(c)}}});b.when("jQuery","gwAjax").register("shogunProductDB",function(b,g){function c(a){var c=[];d[a]={loading:!0,pdb_observe:function(a){c.push(a)},pdb_unobserve:function(a){c=b.grep(c,function(b){return b!==a})},_trigger:function(){b.each(c,function(){this.call(d[a])})}};return d[a]}
function n(r,p){this.ajaxUrl=r;this.experienceStr=p;this._add=function(a){a.p&&b.each(a.p,function(a,h){if(h.asin){var l=d[h.asin]||c(h.asin);b.extend(l,h,{loading:!1,error:!1});l._trigger(h)}})};this.addSims=function(a,m){if(m){var p=d[a]||c(a);b.extend(p,{sims:m});p._trigger(a)}};this._ajax=function(c,m,d){d=d||{};c=b.extend(!0,{},r,{params:{sa:c,oe:p}},d);a.ue_id&&(c.params.rrid=a.ue_id);return g(c.url,{method:c.method,params:c.params,success:m.success,error:m.error,id:"gw-jslibs-"+m.id})};this.get=
function(a){return a in d?d[a]:c(a)}}var d={};return function(a,b){return new n(a,b)}});b.when("jQuery","p-detect").register("component-feed-carousel",function(e,g){var c=e.extend(!0,{},g);e.each({pointerPrefix:function(){return"onmspointerup"in document||"onpointerup"in document?"onpointerup"in document?"pointer":"MSPointer":!1},actionMode:function(){var a=c.capabilities.pointerPrefix;return a?a:c.capabilities.touch?"touch":"mouse"}},function(a,b){c.capabilities[a]=b()});var n={};e.each({start:{mouse:"down",
touch:"start",pointer:"down",MSPointer:"Down"},end:{mouse:"up",touch:"end",pointer:"up",MSPointer:"Up"}},function(a,b){var h=c.capabilities.actionMode,m="string"===typeof b?b:b[h];n[a]=m?h+m:b.mouse===f?"":"mouse"+b.mouse});c.action=n;var d=function(a,b,c,m){this.init(a,b,c,m)};d.prototype={init:function(c,d,h,m){var q=this;e("html").hasClass("a-touch")&&c.addClass("feed-carousel-touch");q.config=m||{};q.adjustMarginOnChange=!1!==q.config.adjustMarginOnChange;q.defaultCssRightMargin=null;q.minItems=
d||10;q.imgClass=".product-image";q.$carousel=c;q.cfMinItems=h||6;q.cfFired=!1;q.shovelerReadyFired=!1;q.slotId=q.getSlotId();q.touch=q.$carousel.hasClass("feed-carousel-touch");q.ajaxSource=q.$carousel.parent().hasClass("ajaxSource");q.$shelf=q.$carousel.find(".feed-carousel-shelf");q.$viewport=q.$carousel.find(".feed-carousel-viewport");q.$spinner=q.$carousel.find(".spinner");q.$left=e(".feed-carousel-control.feed-left",c);q.$right=e(".feed-carousel-control.feed-right",c);q.$buttons=e(".feed-carousel-control",
c);q.$thumb=e(".feed-scrollbar-thumb",c);q.shelfLeft=-1*parseInt(q.$shelf.css("left"),10);q.calcWidth=e("html").hasClass("a-lt-ie9");q.noOpacity=e("html").hasClass("a-lt-ie9");q.uniqueId=q.getUniqueId();q.$left.attr("aria-hidden",!0);q.$right.attr("aria-hidden",!0);q.bindEvents();q.$carousel.data("Carousel",q);q.$carousel.trigger("change");q.token=!1;q.lock=function(){q.token=!0};q.unlock=function(){q.token=!1};q.locked=function(){return q.token};b.when("gw-first-carousel").execute(function(){q.first=
q.$carousel.hasClass("first-carousel");q.shouldControlsOn()?q.showControls():q.hideControls()});q.uniqueId&&b.when(q.uniqueId).execute(function(b){q.appendCards(b.cards);if(b.cards&&q.slotId&&"object"===typeof a.ue&&"function"===typeof a.ue.count){var c="gw-"+q.slotId.toString()+"-lazy-cards",h="gw-"+q.slotId.toString()+"-lazy";a.ue.count(c,(a.ue.count(c)||0)+b.cards.length);a.ue.count(h,(a.ue.count(h)||0)+1)}})},getUniqueId:function(){if(this.$viewport){var a=this.$viewport.closest(".shogun-widget");
return 0<a.length?e(a[0]).attr("id"):null}},getSlotId:function(){var a=this.$carousel.closest(".gw-widget-instrument");return 0<a.length?e(a[0]).attr("id"):null},bindEvents:function(){function b(a){return c.capabilities.pointerPrefix&&-1<e.inArray(a.originalEvent.pointerType,[2,"touch"])||"touch"===c.capabilities.actionMode}var d=this,h=e("body");d.$buttons.ready(function(b){d.shovelerReadyFired||(d.slotId&&(b=d.slotId.toString()+"-active",a.GWI&&a.GWI.recordLatency(b),a.GWI&&a.GWI.register(b)),d.shovelerReadyFired=
!0)});d.$carousel.change(function(a){d.updateItems();d.updateSpinner();d.updateShelf();d.updateControls();null===d.defaultCssRightMargin&&d.$shelf.children("li").first()&&(a=parseInt(d.$shelf.children("li").first().css("margin-right"),10),d.defaultCssRightMargin=isNaN(a)?10:a);d.adjustMarginOnChange&&d.adjustCardMargin()});d.$left.click(function(a){a.preventDefault();d.changePage(-1);d.slotId&&d.logCounter("gw-"+d.slotId.toString()+"-left")});d.$right.click(function(a){a.preventDefault();d.changePage(1);
d.slotId&&d.logCounter("gw-"+d.slotId.toString()+"-right")});d.bindImageLoadEvents(d.$shelf);var m;e(a).resize(function(){clearTimeout(m);m=setTimeout(function(){var a=d.getDimensions(),a=Math.max(Math.min(a.shelfLeft,a.maxLeft),0);d.moveShelf(a)},100)});d.$thumb.mousedown(function(a){var b=a.clientX;1===a.which&&(a.preventDefault(),d.$carousel.addClass("scrolling"),h.bind("mousemove.feed-carousel",function(a){var c=d.getDimensions(),c=Math.max(Math.min(c.shelfLeft+1/c.pageRatio*(a.clientX-b),c.maxLeft),
0);b=a.clientX;d.moveShelf(c)}),e(document).bind("selectstart.feed-carousel",function(){return!1}))});h.add(a).mouseup(function(a){d.$carousel.removeClass("scrolling");d.$carousel.hasClass("hovering")||d.hideControls();h.unbind("mousemove.feed-carousel");e(document).unbind("selectstart.feed-carousel")});d.$carousel.hover(function(){d.$carousel.addClass("hovering");clearTimeout(d.hoverTimer);d.hoverTimer=setTimeout(function(){d.$carousel.hasClass("hovering")&&!d.$carousel.hasClass("touching")?d.showControls():
d.$carousel.removeClass("touching")},300)},function(){d.$carousel.removeClass("hovering touching");clearTimeout(d.hoverTimer);d.$carousel.hasClass("scrolling")||(d.hoverTimer=setTimeout(function(){d.$carousel.hasClass("hovering")||d.hideControls()},600))});d.$carousel.bind(c.action.start,function(a){b(a)&&(d.$carousel.addClass("touching"),clearTimeout(d.touchTimer),d.touchTimer=setTimeout(function(){d.$carousel.removeClass("touching")},5E3))});d.$carousel.bind(c.action.end,function(a){b(a)&&(d.$carousel.removeClass("touching"),
clearTimeout(d.touchTimer),clearTimeout(d.hoverTimer))});d.$viewport.scroll(function(){d.shelfLeft=d.$viewport.scrollLeft();d.updateControls()})},bindImageLoadEvents:function(a){var b=this;e(b.imgClass,a).one("load",function(){b.$carousel.trigger("change")})},getDimensions:function(){var a=this.$shelf.width(),b=this.shelfLeft,c=this.$carousel.width();return{pageWidth:c,shelfWidth:a,shelfLeft:b,pageRatio:c/a,leftRatio:b/a,maxLeft:a-c}},updateItems:function(){var b=this,c=b.$shelf.find(".feed-carousel-card"),
h=function(a){return"none"===a.css("display")};c.each(function(c,d){var l=e(d);if(!h(l)&&!b.config.visibleBeforeLoad)return!0;l.attr("aria-posinset",c+1);l.attr("aria-hidden",!1);l.attr("role","listitem");return 0>=l.find(b.imgClass).filter(function(){return!this.complete}).length?(l.css("display","inline-block"),c+1>=b.cfMinItems&&!b.cfFired&&(b.slotId&&(l=b.slotId.toString()+"-visible",a.GWI&&a.GWI.recordLatency(l),a.GWI&&a.GWI.register(l)),b.cfFired=!0),!0):!1});c.attr("aria-setsize",c.size());
b.$items=c.filter(function(){return!h(e(this))})},updateShelf:function(){var a=0;this.calcWidth&&(this.$shelf.children().each(function(){a+=e(this).outerWidth(!0)}),this.$shelf.width(a));this.touch&&this.$carousel.not(".fresh-shoveler-tablet-app .feed-carousel").height(this.$shelf.outerHeight(!0))},updateSpinner:function(){this.size()<this.minItems&&this.ajaxSource?this.$spinner.show():(this.size()<this.minItems&&"object"===typeof a.ue&&"function"===typeof a.ue.count&&a.ue.count("shovelerNotEnoughItem",
(a.ue.count("shovelerNotEnoughItem")||0)+1),this.$spinner.hide())},updateControls:function(){this.updateArrows();this.updateScrollThumb()},shouldControlsOn:function(){return this.first&&!this.touch},showControls:function(a){this.$thumb.add(this.$buttons).stop(!0,!0).fadeIn({duration:300,complete:a,queue:!1})},hideControls:function(a){var b=this.$thumb;this.shouldControlsOn()||(b=b.add(this.$buttons));b.stop(!0,!0).fadeOut({duration:300,complete:a,queue:!1})},appendCards:function(a){this.$shelf.append(a);
this.bindImageLoadEvents(a);this.$carousel.trigger("change")},updateArrows:function(){var a=this,b=a.getDimensions();e.each([{$e:a.$left,enabled:0<b.shelfLeft},{$e:a.$right,enabled:b.shelfLeft<b.maxLeft}],function(b,c){var d=c.$e;c.enabled?d.removeClass("feed-control-disabled"):d.addClass("feed-control-disabled");a.noOpacity&&(c.enabled?d.css("opacity","1"):d.css("opacity","0.5"))})},updateScrollThumb:function(){var a=this.getDimensions(),b=a.leftRatio*a.pageWidth,a=Math.min(a.pageRatio*a.pageWidth,
a.pageWidth);this.$thumb.width(a).each(function(){e(this).animate({left:b},0)})},logCounter:function(b){"object"===typeof a.ue&&"function"===typeof a.ue.count&&(a.ue.count(b,(a.ue.count(b)||0)+1),a.ue.count("gw-shoveler-click",1))},changePage:function(a){var b=this.getDimensions(),c=this.alignWithItem(b.shelfLeft+a*b.pageWidth),c=Math.min(0>a?c.right:c.left,b.maxLeft);this.locked()||(this.lock(),b.shelfLeft===c?(this.bounce(this.$shelf,-30*a),this.bounce(this.$thumb,6*a)):this.moveShelf(c,400))},
moveShelf:function(a,b){function c(){d.updateArrows();d.unlock()}var d=this;b=b||0;d.shelfLeft=a;if(d.touch)d.$viewport.animate({scrollLeft:a},b,"swing",c);else{var q=d.getDimensions(),q=a/q.shelfWidth*q.pageWidth;d.$shelf.animate({left:-a},b,"swing",c);d.$thumb.animate({left:q},b,"swing",function(){d.updateScrollThumb();d.unlock()})}},getItems:function(){return this.$items},size:function(){return this.getItems().length},alignWithItem:function(a){if(0>a)return{left:0,right:0};var b=this,c=b.getItems(),
d=c.map(function(){var c=b.cardPosition(e(this));if(a>=c.left&&a<=c.right)return c}).get(0);return d?d:b.cardPosition(c.last())},cardPosition:function(a){var b=(a.position()||{left:0,right:0}).left;a=b+a.outerWidth(!0);return{left:b,right:a}},bounce:function(a,b){function c(a){var b={};b[d.touch?"left":"marginLeft"]=a;return b}var d=this;a.each(function(){var a=e(this);a.animate(c(b),400,"swing",function(){a.animate(c(0),100,"swing",d.unlock)})})},setCardMargin:function(a){this.$shelf.children("li").first()&&
this.$shelf.children("li").first().css("margin-right")!==a+"px"&&(this.$shelf.children("li").css("margin-right",a+"px"),this.updateShelf())},adjustCardMargin:function(a){a=a===f||null===a?this.defaultCssRightMargin:a;this.setCardMargin(a);var b=this.getDimensions(),b=0>b.maxLeft?Math.ceil(-b.maxLeft/this.size()):a;this.setCardMargin(b<a?a:b)}};return{createCarousel:function(a,b,c,m){e(a).each(function(a,l){var k=e(l);new d(k,b,c,m)})}}});b.when("jQuery","SafeP").execute("shoveler-lazy-non-visible-images",
function(e,g){function c(a){"object"===typeof d.ue&&"function"===typeof d.ue.count&&d.ue.count(a,(d.ue.count(a)||0)+1)}function n(){d.GWData&&e.each(d.GWData,function(a,b){if(a&&b&&b.data&&!b.loaded){b.loaded=!0;c("gw-lazy-load-all");var h=[];e.each(b.data,function(a,b){e.each(e(b),function(a,b){h.push(b)})});h&&0<h.length&&c("gw-lazy-load-non-empty");g&&g.register(a,function(){return{cards:h}})}})}var d=a;b.when("x1").execute(n);b.when("ready").execute(n);b.when("load").execute(n)});
b.register("SafeP",function(){var a={};return{register:function(g,c){"string"===typeof g&&"function"===typeof c&&(a[g]||(a[g]=function(c,d){b.register(c,d);a[c]=function(){}}),a[g]&&a[g](g,c))}}});b.when("A").register("gw-count-down",function(a){return function(b,c,n,d,r){function p(a){a=a||{};return{update:a.update||f.noop,count:a.count||f.noop,transition:a.transition||f.noop}}function h(b,c){return p({update:function(){w(b);a.trigger(c)}})}function m(){z=r.starts_in;return p({update:function(){a.trigger(H);
w(A)},transition:function(){E=h(r.started,B);E.update()},count:function(){y=setInterval(function(){c=u-Date.now();l(c,r.starts_in_timer)},1E3)}})}function q(){z=r.ends_in;return p({update:function(){w(A)},transition:function(){E=h(r.has_ended,C);E.update()},count:function(){y=setInterval(function(){n=v-Date.now();l(n,r.ends_in_timer)},1E3)}})}function l(a,b){var c,h,l;c=Math.floor(a/36E5);h=Math.floor(a/1E3/60%60);l=Math.floor(a/1E3%60);var d=A,m;m=z+" "+k(c)+k(h,!0,!0)+k(l,!1,!0);d.timerString=m;
d=A;c=b?b.replace("_hours_",c).replace("_minutes_",h).replace("_seconds_",l):"";d.readoutString=c;w(A);0>=a&&(clearInterval(y),E.transition())}function k(a,b,c){var h="";if(0<a||c)h=("0"+a).slice(-2);if(!c&&0<a||b)h+=":";return h}function w(b){b.readoutString?A=b:(A.readoutString=b,A.timerString=b);a.trigger(G,A)}c=parseInt(c,10);n=parseInt(n,10);d=JSON.parse(d);var f=a.$,t=Date.now(),u=t+c,v=t+n,y,z="",A={timerString:"",readoutString:""},C=b+"ended",B=b+"started",G=b+"updateTimer",H=b+"countingDown",
F=b+"soldOut",E=function(){return p({update:function(){if(d&&d.dealState){var a=d.dealState.toUpperCase();E="AVAILABLE"===a&&86400<n/1E3?h(""):-1<a.indexOf("WAITLIST")?h(r.on_waitlist):"SOLDOUT"===a?h(r.sold_out,F):0<c?m():0<n?q():h(r.has_ended,C)}E.update();E.count()}})}();E.update();a.on(b,function(){E.update()})}})});